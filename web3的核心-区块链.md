## 区块链的产生

2008年10月31日，一位网名为中本聪(Satoshi Nakamoto)的人发表了一篇名为《[比特币：一种点对点的电子现金系统](https://github.com/xiaolai/bitcoin-whitepaper-chinese-translation)》的论文出现并中提出“区块链”概念，并在2009年创立了比特币网络，开发出第一个区块，这样的第一个区块叫做“创世区块” 。



## 什么是区块和节点

区块是一个载体单位，存放着关键信息，这样的一个个区块按照时间顺序形成了区块链，区块之间是环环相扣的 每一个区块都指向前一个区块，他们通过区块里存放的**哈希函数**算出来的哈希值来互相验证，而哈希函数具有不可逆 几乎不可破解的性质，所以由他们为基础连接而成的区块链同样具有其优点。



这就导致篡改区块内容的成本变得极大，一旦你修改了某一个区块的内容，那么你就要修改跟这个区块相联系的区块，以此类推 你必须把链表往后的所有区块同时修改才能让区块相信你所修改的内容，这样得行为要付出的成本和时间都是不可估量的，所以存在时间越久的区块链，区块越多的区块链越安全。



那节点是什么？很简单，你接入到该区块链的每一个智能设备都是一个节点。但是这些节点互有区别，有的节点是为了维护全网的数据获取利益，有的节点只是个人为了维护自己相关的数据。



## 区块链的特点之一：去中心化



去中心化是一个我们常听过的词，跟他的字面意思一样，去中心化就是指在该系统中，没有人拥有上帝权限来收集管控着所有人的数据，掌握整个系统的正常运行与否。想象一下，将比特币网络比喻成一个巨大的账本（事实也是如此）。如果以我们以往的习惯来说，掌握如此多人的巨大账本一定是由银行来做，银行具有上帝般的权限，这就是中心化的系统，银行就是那一个中心。而对于比特币网络来说，系统中没有那样的一个银行存在，那这个复杂账本怎么维护呢？就是靠我们所有节点去维护，每个节点的手中都可以获得一份记录着所有人交易行为的账本，A付给B 5个比特币，那么这样的行为就被广播的所有人的账本上 CDEFG...所有人的账本都记录了A的余额减少 B的余额增加这样的详细记录

由此引申，支付的本质是“将账户A中减少的金额增加到账户B中”。如果人们有一本公共账簿，记录了所有的账户至今为止的所有交易，那么对于任何一个账户，人们都可以计算出它当前拥有的金额数量。而区块链恰恰是用于实现这个目的的公共账簿（去中心化分布式记账系统），其保存了全部交易记录。在比特币体系中，比特币地址相当于账户，比特币数量相当于金额。

## 什么是挖矿，重要的共识机制



对于记录与自己毫不相关账本数据，显然不是每个节点都有无私的想法去做零收益付出的，如果每个节点都不做的话那么整个区块链也就停滞了。

所以为了激励节点为区块链服务，去记账 提高运算速度，中本聪规定给予为区块链作出贡献的节点们代币奖励--即比特币

一个新的区块的产生要与已存在的上一个区块相吻合（上文提到的哈希值），这一行为要进行大量的运算，直到符合结果的目标值产生，即出块成功。

同时，如果A与B进行交易，在他们打成交易的时候 要把交易行为广播给其他节点，需要其他节点的证明，大家都承认了该交易的正确才会记录到账本之上，而同样的，这样的确认行为也不是零成本的，这需要发起交易的人支付Gas费（或者说手续费）给完成验证的节点作为报酬。

于是 为获取奖励而完成这样的运算 验证行为的节点的行为被形象的称之为挖矿。



### Proof of works,pow工作量证明



验证这些节点是不是在挑简单的垃圾数据运算，是否出功出力干活了就需要这个pow工作量证明机制来证明了，这是一种对应服务与资源滥用、或是拒绝服务攻击的经济对策。

一般要求节点进行一些耗时适当的复杂运算，并且答案能被服务方快速验算，以此耗用的时间、设备与能源做为担保成本，以确保服务与资源是被真正的需求所使用。



### Proof of stake, pos权益证明机制



上面说的的活都只能用显卡矿机去硬算，需要消耗电力和显卡等能源去做（但挖矿绝对不是导致显卡长期短缺的原因），为了省去这一环节 转为全虚拟，大量的加密货币都采用pos权益证明机制，用户通过质押一定的代币或者凭证来获取符合算法规定的收益。



主流的共识机制就是pow, pos，至于类似Poh历史证明、Poa权威证明等不再叙述。



## 创建一个属于你的账户， 公钥与私钥 

我们可以通过各种途径去创建一个属于自己的公私钥对，这样的一个组合就是一个账户，他们的原理来自于非对称加密。

metamask这样的去中心化钱包可以很方便创建一个以太坊地址，在创建的时候也会提供给你一个助记词列表，这个助记词是你找回账户的唯一途径。

公钥用来加密信息，也相当于你的银行账户地址，私钥用来解密，相当于你的密码，公钥是可以公示给他人的，也代表了你的身份，但是私钥是不可以泄露给任何人的。



## 如何进行链上转账？公链的概念



当我们拥有一个账户时，或者加密货币交易所（热钱包），第一个要做的可能就是完成一次在区块链上的转账行为。

对于钱包，每一个不同的链会独立要创建一个独立的钱包，比如在以太坊链上我们创建的是以太坊地址，在比特币链我们创建的是比特币的地址。交易在大多数情况下只能在同一链上发生，在支付的时候也要付出gas费，不同的公链为了有竞争力，会有较为便宜的gas费 而以太坊目前的gas费是比较贵的。



对于加密货币交易所而言，我们经常要在不同的交易所和钱包之间转账USDT，在转账的时候我们会看到系统让你选择不同的通道，诸如“erc20” “bep-20” “trc20"等，这些字符的意思是不同的链和所代表的标准等，我们可以通过这个来辨别不同的链，比如”erc20”是以太坊的标准，“bep20”是币安的bsc智能链 ，"trc20"是波长tron的链



这些链都是公链，由此我们谈一谈区块链的链的分类：公链、联盟链、私链。



公链，全程区块链公链系统，是区块链里最底层基础的网络，生态、协议、都是在公链上部署和存在的，在大部分情况下，区块链的生态协议开发第一步就是选择一个公链并在其链上进行发展。

公链是一个完全去中心化，数据完全公开透明，面向任何人的，所有人都可以进行使用的的区块链，他是最符合区块链及去中心化精神的。

公链对于其开发团队也是不可控的，公链一旦产生，发展到一定规模，即使开发团队跑路也不会动摇其存在，团队无法销毁51％以上的节点，所以销毁公链的可能性几乎不存在。公链的很多特性是天生反集权的，所以目前公链在国内及部分地区是很难开发存在的。



公链的公开透明特性不适用于存放一些私密数据，运行和开发成本都很高，对于企业来说性价比比较低，所以企业选择了另一种链——联盟链，联盟链是有准入门槛的，需要有相关权限的节点允许你才能加入，联盟链因为节点可信度高，所以在交易速度等很多方面是公链很难达到的，目前国内的建设开发主要在联盟链上。



## 几种类型币种的基本认知

我们如何将手里的现金兑换成某一种加密货币呢

稳定币就是其中的媒介



我们手里的现金是法币，USDT USDC这样的与美元1:1的币叫做稳定币，它们的发行是由现实中的美元储备为基础的，通过使用稳定币 我们就可以将手里的现金兑换成某一个币了。

所以很简单，你只需要有银行卡/信用卡/paypal等，找到售卖稳定币的商家，购买到他们的稳定币，然后通过相关交易对就可以购买了。



## 区块链的基础设施



### 预言机



预言机并不能顾名思义而为其赋予能够语言的功能，它本身就具有计算机和数学领域的概念，而在区块链中，区块链预言机的作用是完成区块链与现实世界的连通。区块链外信息写入区块链内的机制，一般被称为预言机。他允许确定的智能合约对不确定的现实世界作出反应。

区块链是一个确定性的、封闭的系统环境，目前区块链只能获取到链内的数据，而不能获取到链外真实世界的数据，区块链与现实世界是割裂的。区块链是确定性的环境，它不允许不确定的事情或因素，智能合约不管何时何地运行都必须是一致的结果，所以虚拟机（VM）不能让智能合约有 network call（网络调用），不然结果就是不确定的。

怎么简单理解呢，那就是把区块链比喻成一个黑盒子，区块链中的智能合约等都是黑盒子中的“人”，无论黑盒子中的人怎样呐喊，黑盒子外的人都无法得知且作出反应。但是黑盒子外的世界却可以对黑盒子里的人造成影响，当外世界中的甲说了一句话，外界的A就会把这句话告知黑盒子里的人，这个A就是预言机充当的角色。

有什么具体例子呢，那就是预言机在Defi中的应用。我们知道，现实中的某一个币--比如以太坊币，他的价格是每分每秒都在变动的，那么如果将此数据传回区块链的节点，如果有1000个节点，那么这个传输数据的api接口就要调用1000次，由于延迟原因，各个节点得到的价格是不一样的，这对于必须是确定性结果的区块链来说是不被允许的，各个节点无法达成共识，那么整个系统将会崩溃，所以需要预言机的存在。

预言机还有一个作用是生成一个不可预测的随机数。



预言机是可以自己搭建的，但是预言机本身非常脆弱，我们经常会看到某个项目因为自己搭建预言机出问题而导致各种问题，所以一个成熟预言机的服务商是很被欢迎的，Chainlinks就是这样一个提供预言机服务的区块链公司。





### 跨链桥



我们从上文转账通道就已知转出和转入地址必须使用相同的公链地址，否则币就会丢失（虽然交易所会给你找回，但链上转账不止交易所一种方式）。我们自己也很容易想出，链与链是不相关的，资产是不能互通的。但在很多时候我们的确有这样的需求，而跨链就是为此产生的。跨链就是通过各种机制来完成资产的链与链间的转移，优秀的跨链解决方案有Cosmos和Polkadot。

主要技术有（在此不展开解释）：公证人机制、哈希锁定，侧链&中继链技术 。



#### Weth以太坊链上不同Token互通方案



（关于ERC20标准后面会提到）

在提及跨链的时候，一个稍微类似或者说联想到的就是Weth的使用，当我们在Opensea上交易NFT的时候，我们经常看到一个粉红色的以太坊标志的代币（以太坊代币标志是黑色的），这个就是Weth，意为包装的以太坊。



这里有一个次序关系，首先以太币是以太坊区块链上的原生代币，其次是部署在以太坊链上的其他代币--比如A项目发行了A代币，B项目发行了B代币，最后是ERC20标准 它其中定义了 代币应该如何在以太坊网络上转移，以及如保持代币在以太坊网络上的转移能够有一个一致的记录。

那么其实以太币并不符合ERC20标准，以太币是以太坊链上其他币的基础代币，他在ERC20标准被提出前就存在了。



有了Weth，我们就能在平台上无需交易兑换就能与其他币直接交易了。就无论你来自哪个分支，你是matic或者其他可以，只要你属于以太坊链的，我们无需把eth换成matic就直接交易，因为weth成了一个可以变动的代币，极大的灵活方便了整个过程。









### 去中心化存储













## 区块链安全



恶意挖矿攻击

双花攻击

供应链攻击

区块链拒绝服务攻击